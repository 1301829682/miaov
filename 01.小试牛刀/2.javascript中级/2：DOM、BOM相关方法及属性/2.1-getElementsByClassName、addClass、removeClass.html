<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<!-- getgetElementsByClassName -->
<script>
window.onload = function() {
	var aLi = getElementsByClassName(document.getElementById('ul1'),'box');
	alert(aLi.length);
	console.log(aLi);
	
	/*
	// 得到class方法:遍历页面中所有元素，判断类名
	function getElementsByClassName(){
		var aEls = document.getElementsByTagName('*'); //获取所有元素
		var arr =[]; //存被选中的元素

		for(var i=0; i<aEls.length;i++){
			if(aEls[i].className == 'box'){
				arr.push(aEls[i]);
			}
		}
		return arr;
	};
	*/
	function getElementsByClassName(parent,className){
		var aEls = parent.getElementsByTagName('*'); //获取所有元素
		var arr =[]; //存被选中的元素

		for(var i=0; i<aEls.length;i++){
			// if(aEls[i].className == className){
			// 	arr.push(aEls[i]);
			// }
			var aClassName = aEls[i].className.split(' ');
			for(var j=0;j<aClassName.length;j++){
				if(aClassName[j] == className){
					arr.push(aEls[i]);
					break; //跳出for循环避免查找重复类
				}
			}
		}
		return arr;
	};

}
</script>

<!-- addClass -->
<script>
	function addClass(obj,className){
		
		if(obj.className == ''){
			obj.className = className; // 如果原来没有class
		}else{
		// 如果原来有class
			var arrClassName = obj.className.split(' ');
			var _index = arrIndexOf(arrClassName,className);
			if(_index == -1){
				// 要添加的class已经没有
				obj.className += ' ' + className; 
			}
			
		}
	}

	function arrIndexOf(arr,v){
		for(var i=0; i<arr.length; i++){
			if(arr[i] == v){
				return i;
			}
		}
		return -1;
	}
	addClass(oDiv,'box1')
</script>

<!-- removeClass -->
<script>
	function removeClass(obj,className){
		// 如果原来有class
		if(obj.className != ''){
			var arrClassName = obj.className.split(' '); //用空格分隔成一个数组
			var _index = arrIndexOf(arrClassName,className);
			if(_index != 1){
				arrClassName.splice(_index,1); //删除
				obj.className = arrClassName.join(' '); //将数组用空格拼接成字符串
			}
		}
	}
</script>

</head>

<body>
	<ul id="ul1">
		<li class="box box">111111</li>
		<li>222222</li>
		<li class="box box2">333333</li>
		<li>444444</li>
	</ul>
	<ul id="ul2">
		<li class="box box">111111</li>
		<li>222222</li>
		<li class="box box2">333333</li>
		<li>444444</li>
	</ul>
</body>
</html>
